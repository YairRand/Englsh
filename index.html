<html>
<body>
  <style>
    textarea { width: 49%; height: 70%; }
    body { padding: 0; margin: 0; }
    button { margin-left: 50%; }
  </style>
  <textarea id="q">
To count to a number, set the counter to 0, and then while the counter is less than the number, add 1 to the counter and have the console log it.
If 5 is 2 plus 3 and less than 6 and 7, count to 10.
Make me a sandwich.
If me is a sandwich, do the following:
  Note: The indentation here is optional.
  Have the console log "Why am I a sandwich?".
  Then, make me a pickle.
  Finally, have the console log "I am no longer a sandwich.".
Sigh.
Eat the cookie.
Make sploo an object.
Bob is a Shmo.
If bob's balloon is yellow, explode.

To eat a cookie, do things, and then have the console log the cookie.
If the document's firstChild exists, do this.
The body is the document's body.
While the body's firstChild exists, have the body removeChild the body's firstChild.

Make a sandwich. Eat it.</textarea>
  <textarea id="y"></textarea>
  <button>Run</button>
  <div id="logarea"></div>
  <script src="parser.js"></script>
  <script src="astring.js"></script>
  <script>
    var q = document.querySelector( "#q" ),
        y = document.querySelector( "#y" ),
        logArea = document.querySelector( '#logarea' ),
        button = document.querySelector( 'button' );
    ( function () {
      var log = console.log;
      console.log = function ( x ) {
        log.apply( console, arguments );
        logArea.appendChild( document.createTextNode( x ) );
        logArea.appendChild( document.createElement( 'br' ) );
      }
    } )();
    q.onkeyup = function () {
      try {
        logArea.innerText = '';
        var v = parser.parse( this.value );
        y.value = astring( v, {
          indent: '  ',
          comments: true
        } );
        button.disabled = false;
      } catch( e ) {
        y.value = "???";
        button.disabled = true;
        console.log( e );
      }
    }
    q.onkeyup();
    q.focus();
    button.onclick = function () {
      try {
        eval( y.value );
      } catch ( e ) {
        var m, b = e.message;
        if ( e instanceof TypeError ) {
          m = "How do I " + b.match( /.+(?= is not)/) + "?";
        } else if ( e instanceof ReferenceError ) {
          m = "What is "  + b.match( /.+(?= is not)/ ) + "?";
        }
        console.log( m ? m + " (" + e + ")" : e );
      }
    }
  </script>
</body>
</html>
